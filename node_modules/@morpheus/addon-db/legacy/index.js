/*! MDatabase 2.1.4.6 [Android 2.1.4.5, iOS 2.1.4.6] */
(function(b,c){var a="2.1.4.6";M.addon("db",{create:function(){var f,i,d,h=b,j={};f=M.defaultSetting.create({paramsKeys:["path","callback"],defaultSetting:{path:"",callback:function(l,k,m){M.debug.log("M.db.create.callback",l,k)}},surrogateKeys:{source:"path",alias:"path",name:"path",db:"path",database:"path",finish:"callback",onfinish:"callback"},enumsKeys:{}});i=f.convert(arguments);j.path=(i.path.indexOf(".db")===(i.path.length-3))?i.path:(i.path+".db");d=M.execute("wn2DbCreate",j);var e=d.status;var g={};if(d.error){g={status:d.status,error:d.error,message:d.error}}else{g={status:d.status,path:d.path||"",alias:d.alias||"",source:d.source||"",name:d.name||"",fullpath:d.source||"",db_name:d.name||""}}setTimeout(function(){i.callback.call(h,d.status,g,i)},100);return g},remove:function(){var f,i,d,h=b,j={};f=M.defaultSetting.create({paramsKeys:["path","callback"],defaultSetting:{path:"",callback:function(l,k){M.debug.log("M.db.remove.callback",l,k)}},surrogateKeys:{source:"path",alias:"path",name:"path",db:"path",database:"path",finish:"callback",onfinish:"callback"},enumsKeys:{}});i=f.convert(arguments);j.path=(i.path.indexOf(".db")===(i.path.length-3))?i.path:(i.path+".db");d=M.execute("wn2DbDelete",j);var e=d.status;var g={};if(d.error){g={status:d.status,error:d.error,message:d.error}}else{g={status:d.status,path:d.path||"",alias:d.alias||"",source:d.source||"",name:d.name||"",fullpath:d.source||"",db_name:d.name||""}}setTimeout(function(){i.callback.call(h,d.status,d,i)},100);return g},open:function(){var f,i,d,h=b,j={};f=M.defaultSetting.create({paramsKeys:["path","callback"],defaultSetting:{path:"",callback:function(l,k){M.debug.log("M.db.open.callback",l,k)}},surrogateKeys:{source:"path",alias:"path",name:"path",db:"path",database:"path",finish:"callback",onfinish:"callback"},enumsKeys:{}});i=f.convert(arguments);j.path=(i.path.indexOf(".db")===(i.path.length-3))?i.path:(i.path+".db");d=M.execute("wn2DbOpen",j);var e=d.status;var g={};if(d.error){g={status:d.status,error:d.error,message:d.error}}else{g={status:d.status,path:d.path||"",alias:d.alias||"",source:d.source||"",name:d.name||"",fullpath:d.source||"",db_name:d.name||""}}setTimeout(function(){i.callback.call(h,d.status,g,i)},100);return g},close:function(){var f,i,d,h=b,j={};f=M.defaultSetting.create({paramsKeys:["path","callback"],defaultSetting:{path:"",callback:function(l,k){M.debug.log("M.db.close.callback",l,k)}},surrogateKeys:{source:"path",alias:"path",name:"path",db:"path",database:"path",finish:"callback",onfinish:"callback"},enumsKeys:{}});i=f.convert(arguments);j.path=(i.path.indexOf(".db")===(i.path.length-3))?i.path:(i.path+".db");d=M.execute("wn2DbClose",j);var e=d.status;var g={};if(d.error){g={status:d.status,error:d.error,message:d.error}}else{g={status:d.status,path:d.path||"",alias:d.alias||"",source:d.source||"",name:d.name||"",fullpath:d.source||"",db_name:d.name||""}}setTimeout(function(){i.callback.call(h,d.status,g,i)},100);return g},query:function(){return this.execute.apply(this,arguments)},execute:function(){var e,q,r,d=b,l={};e=M.defaultSetting.create({paramsKeys:["path","sql","callback"],defaultSetting:{path:"",sql:"",async:false,multiple:false,callback:function(i,f){M.debug.log("M.db.execute.callback",i,f)}},surrogateKeys:{source:"path",alias:"path",name:"path",db:"path",database:"path",finish:"callback",query:"sql",onfinish:"callback"},enumsKeys:{}});q=e.convert(arguments);l.path=(q.path.indexOf(".db")===(q.path.length-3))?q.path:(q.path+".db");l.sql=q.sql;l.async=q.async==true?"Y":"N";l.multiple=q.multiple==true?"Y":"N";r=M.execute("wn2DbExecute",l);var g=r.status;var n={};if(r.error){n={status:r.status,error:r.error,message:r.error}}else{if(q.multiple){n={status:r.status,path:r.path||"",alias:r.alias||"",source:r.source||"",name:r.name||"",count:r.count,fullpath:r.source||"",db_name:r.name||""}}else{var p=r.rows||[];var j=r.fields||[];for(var h=0;h<p.length;h++){var o=p[h];for(var k=0;k<j.length;k++){var m=j[k];o[k]=(typeof o[m]===c)?o[k]:o[m]}p[h]=o}n={status:r.status,path:r.path||"",alias:r.alias||"",source:r.source||"",name:r.name||"",count:1,column_count:j.length||0,fields:j,row_count:p.length||0,rows:p,fullpath:r.source||"",db_name:r.name||"",columns:j||[],column:j||[],row_list:p||[]}}}setTimeout(function(){q.callback.call(d,r.status,n,q)},100);return n}},a)})(window);