/*! MMedia 2.1.5.41 [Android 2.1.5.41, iOS 2.1.5.41] */
(function(b,c){var a="2.1.5.41";M.addon("media",{record:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["__SETTING__","callback"],defaultSetting:{path:"/media/voice",filename:M.util.timeString(),overwrite:false,callback:function(j,i,k){M.debug.log("M.media.record.callback",j,i)}},surrogateKeys:{alias:"path",source:"path",name:"filename",finish:"callback",onfinish:"callback"},enumsKeys:{}});g=e.convert(arguments);g.response=M.response.on(function(i){var j=i.status;var k={};if(i.error){k={status:i.status,error:i.error,message:i.error}}else{k={status:i.status,path:i.path||"",alias:i.alias||"",source:i.source||"",filesize:i.size||0,filename:i.name||"",created:i.created||"",updated:i.updated||"",name:i.name||"",size:i.size||0,fullpath:i.source||"",saveDate:i.updated||""}}g.callback.call(f,j,k,g)});h.path=g.path;h.filename=g.filename;h.callback=g.response.toString();h.overwrite=g.overwrite===true?"Y":"N";d=M.execute("wn2MediaRecord",h);if(d.status!=="PROCESSING"){g.response.execute(d)}return M},camera:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["__SETTING__","callback"],defaultSetting:{path:"/media",filename:M.util.timeString(),mediaType:"PHOTO",direction:"BACK",allowEdit:true,saveAlbum:false,overwrite:false,videoQuality:null,callback:function(j,i,k){M.debug.log("M.media.camera.callback",j,i)}},surrogateKeys:{alias:"path",source:"path",name:"filename",mode:"mediaType",media:"mediaType",type:"mediaType",take:"callback",ontake:"callback"},enumsKeys:{direction:{BACK:0,FRONT:1},mediaType:{PHOTO:0,VIDEO:1,MOVIE:1}}});g=e.convert(arguments,function(i,j){if(i=="path"){return(j.length>0&&j.charAt(0)!="/")?"/"+j:j}});g.response=M.response.on(function(i){var j=i.status;var k={};if(i.error){k={status:i.status,error:i.error,message:i.error}}else{k={status:i.status,path:i.path||"",alias:i.alias||"",source:i.source||"",filesize:i.size||0,filename:i.name||"",created:i.created||"",updated:i.updated||"",name:i.name||"",size:i.size||0,fullpath:i.source||"",saveDate:i.updated||""}}g.callback.call(f,j,k,g)});if(g.path===""){if(g.mediaType==="PHOTO"){g.path="/media/photo"}else{if(g.mediaType==="VIDEO"||g.mediaType==="MOVIE"){g.path="/media/video"}}}g.quality=Math.max(0,Math.min(100,g.quality));h.path=g.path;h.filename=g.filename;h.mediaType=g.mediaType;h.direction=g.direction;h.overwrite=g.overwrite===true?"Y":"N";h.allowEdit=g.allowEdit===true?"Y":"N";h.saveAlbum=g.saveAlbum===true?"Y":"N";h.callback=g.response.toString();if(g.videoQuality!==null){h.videoQuality=g.videoQuality}d=M.execute("wn2MediaCamera",h);if(d.status!=="PROCESSING"){g.response.execute(d)}return M},album:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["path","callback"],defaultSetting:{path:"",callback:function(j,i,k){M.debug.log("M.media.album.callback",j,i)}},surrogateKeys:{alias:"path",source:"path",finish:"callback",onfinish:"callback"},enumsKeys:{}});g=e.convert(arguments);g.response=M.response.on(function(i){var j=i.status;var k={};if(i.error){k={status:i.status,error:i.error,message:i.error}}else{k={status:i.status,path:i.path||"",alias:i.alias||"",source:i.source||"",fullpath:i.source||""}}g.callback.call(f,j,k,g)});h.path=g.path;h.callback=g.response.toString();d=M.execute("wn2MediaAlbum",h);if(d.status!=="PROCESSING"){g.response.execute(d)}return M},get:function(){var e,h,d,g=b,i={};e=M.defaultSetting.create({paramsKeys:["path"],defaultSetting:{path:""},surrogateKeys:{alias:"path",source:"path"},enumsKeys:{}});h=e.convert(arguments);i.path=h.path;d=M.execute("wn2MediaGet",i);var f={};if(d.error){f={status:d.status,error:d.error,message:d.error}}else{f={status:d.status,path:d.path||"",alias:d.alias||"",source:d.source||"",format:d.format||"",pixelWidth:d.pixelWidth||0,pixelHeight:d.pixelHeight||0,name:d.name||"",size:d.size||0,duration:d.duration||0,orientation:d.orientation||0,type:d.type||"",created:d.created||"",updated:d.updated||"",filename:d.name||"",filesize:d.size||0,fullpath:d.source||"",saveDate:d.updated||""}}return f},optimize:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({defaultSetting:{source:"",destination:"",overwrite:false,dimension:{width:"auto",height:"auto"},quality:1,format:"PNG",callback:function(i,j){M.debug.log("M.media.resize.callback",i)}},surrogateKeys:{alias:"source",source:"source",path:"source",from:"source",to:"destination",finish:"callback",onfinish:"callback"},enumsKeys:{format:{PNG:0,JPG:1}}});g=e.convert(arguments,function(j,i,k){if(j==="dimension"){if(!k){k=i}if(k.width===c){k.width=i.width}if(k.height===c){k.height=i.height}return k}});g.response=M.response.on(function(i){var j={};if(i.error){j={status:i.status,error:i.error,message:i.error}}else{j={status:i.status,path:i.path||"",alias:i.alias||"",source:i.source||"",fullpath:i.source||""}}g.callback.call(f,j,g)});h.source=g.source;h.destination=g.destination;h.overwrite=g.overwrite;h.dimension=g.dimension;h.quality=g.quality;h.format=g.format;h.callback=g.response.toString();d=M.execute("wn2MediaOptimize",h);return d},crop:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({defaultSetting:{source:"",destination:"",title:"",doneButtonTitle:"",cancelButtonTitle:"",overwrite:false,dimension:{width:"auto",height:"auto"},quality:1,format:"PNG",callback:function(i,j){M.debug.log("M.media.crop.callback",status,i)}},surrogateKeys:{alias:"source",source:"source",path:"source",from:"source",to:"destination",value:"resolution",finish:"callback",onfinish:"callback"},enumsKeys:{format:{PNG:0,JPG:1}}});g=e.convert(arguments,function(j,i,k){if(j==="dimension"){if(!k){k=i}if(k.width===c){k.width=i.width}if(k.height===c){k.height=i.height}return k}});g.response=M.response.on(function(i){var j={};if(i.error){j={status:i.status,error:i.error,message:i.error}}else{j={status:i.status,path:i.path||"",alias:i.alias||"",source:i.source||"",fullpath:i.source||""}}g.callback.call(f,j,g)});h.source=g.source;h.destination=g.destination;h.title=g.title;h.doneButtonTitle=g.doneButtonTitle;h.cancelButtonTitle=g.cancelButtonTitle;h.overwrite=g.overwrite;h.dimension=g.dimension;h.format=g.format;h.quality=g.quality;h.callback=g.response.toString();d=M.execute("wn2MediaCrop",h);return d},_resize:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({defaultSetting:{source:"",destination:"",overwrite:false,dimension:{width:300,height:300},contentMode:"SCALE_TO_FILL",format:"PNG",quality:1,crop:{x:0,y:0,width:0,height:0},callback:function(j,i,k){M.debug.log("M.media.resize.callback",j,i)}},surrogateKeys:{alias:"source",source:"source",path:"source",from:"source",to:"destination",imagesize:"dimension",finish:"callback",onfinish:"callback"},enumsKeys:{contentMode:{SCALE_TO_FILL:0,ASPECT_FILL:1,ASPECT_FIT:2},format:{PNG:0,JPG:1}}});g=e.convert(arguments);g.response=M.response.on(function(i){var j=i.status;var k={};if(i.error){k={status:i.status,error:i.error,message:i.error}}else{k={status:i.status,path:i.path||"",alias:i.alias||"",source:i.source||"",fullpath:i.source||""}}g.callback.call(f,j,k,g)});h.source=g.source;h.destination=g.destination;h.overwrite=g.overwrite;h.dimension=g.dimension;h.contentMode=g.contentMode;h.format=g.format;h.quality=g.quality;h.crop=g.crop;h.callback=g.response.toString();d=M.execute("wn2MediaResize",h);return d},library:function(){return this.picker.apply(this,arguments)},picker:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["__SETTING__","callback"],defaultSetting:{path:"/media.link",mode:"SINGLE",mediaType:"PHOTO",allowEdit:true,column:0,detail:false,zoom:false,maxCount:0,enc:false,title:"",rightBtn:"",leftBtn:"",callback:function(j,i,k){M.debug.log("M.media.picker.callback",j,i)}},surrogateKeys:{alias:"path",source:"path",media:"mediaType",type:"mediaType",choose:"mode",choice:"mode",encrypt:"enc",select:"callback",onselect:"callback"},enumsKeys:{mode:{SINGLE:0,MULTI:1},mediaType:{PHOTO:0,VIDEO:1,MOVIE:1,AUDIO:2,ALL:3}}});g=e.convert(arguments);g.response=M.response.on(function(j){var k=j.status;var o={},n={};if(j.error){o={status:j.status,error:j.error,message:j.error}}else{if(g.mode=="SINGLE"){n=j.files[0];o={path:n.path||"",alias:n.alias||"",source:n.source||"",name:n.name||"",size:n.size||0,duration:n.duration||0,type:n.type||"",created:n.created||"",updated:n.updated||"",orientation:n.orientation||0,fullpath:n.source||"",saveDate:n.updated||"",startDate:n.created||"",endDate:n.updated||""}}else{if(g.mode=="MULTI"){var p=[],m={};for(var l=0;l<j.files.length;l++){n=j.files[l];m={path:n.path||"",alias:n.alias||"",source:n.source||"",name:n.name||"",size:n.size||0,duration:n.duration||0,type:n.type||"",created:n.created||"",updated:n.updated||"",orientation:n.orientation||0,fullpath:n.source||"",saveDate:n.updated||"",startDate:n.created||"",endDate:n.updated||""};p.push(m)}o=p}}}g.callback.call(f,k,o,g)});h.path=g.path;h.mode=g.mode.toUpperCase();h.allowEdit=g.allowEdit===true?"Y":"N";h.mediaType=g.mediaType.toUpperCase();h.column=g.column;h.detail=g.detail===true?"Y":"N";h.zoom=g.zoom===true?"Y":"N";h.enc=g.enc===true?"Y":"N";h.title=g.title;h.rightBtn=g.rightBtn;h.leftBtn=g.leftBtn;h.maxCount=Math.max(0,g.maxCount);h.callback=g.response.toString();d=M.execute("wn2MediaPicker",h);if(d.status!=="PROCESSING"){g.response.execute(d)}return M},imagePicker:function(f){var e,h,d,g=b,i={};e=M.defaultSetting.create({paramsKeys:["callback"],defaultSetting:{paging:false,pagingCount:20,maxCount:0,callback:function(k,j,l){M.debug.log("M.media.imagePicker.callback",k,j)}},surrogateKeys:{select:"callback",onselect:"callback"}});h=e.convert(arguments);h.response=M.response.on(function(j){var k=j.status;var o={},n={};if(j.error){o={status:j.status,error:j.error,message:j.error}}else{var p=[],m={};for(var l=0;l<j.files.length;l++){n=j.files[l];m={path:n.path||"",alias:n.alias||"",source:n.source||"",name:n.name||"",size:n.size||0,duration:n.duration||0,type:n.type||"",created:n.created||"",updated:n.updated||"",fullpath:n.source||""};p.push(m)}o=p}h.callback.call(g,k,o,h)});i.paging=h.paging;i.pagingCount=h.pagingCount;i.maxCount=h.maxCount;i.callback=h.response.toString();d=M.execute("wn2MediaImagePicker",i);if(d.status!=="PROCESSING"){h.response.execute(d)}return M},play:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["path","type"],defaultSetting:{path:"",playType:"NATIVE",callback:function(){}},surrogateKeys:{url:"path",alias:"path",source:"path",type:"playType",done:"callback",ondone:"callback",close:"callback",onclose:"callback",finish:"callback",onfinish:"callback"},enumsKeys:{type:{NATIVE:0,WEB:1,YOUTUBE:1}}});g=e.convert(arguments);g.response=M.response.on(function(i){var j=i.status;var k={};if(i.error){k={status:i.status,error:i.error,message:i.error}}else{k={status:i.status}}g.callback.call(f,j,k,g)});h.path=g.path;h.playType=g.playType;h.callback=g.response.toString();d=M.execute("wn2MediaPlay",h);if(d.status!=="PROCESSING"){g.response.execute(d)}return M},removeLibrary:function(){return this.remove.apply(this,arguments)},remove:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["__SETTING__","callback"],defaultSetting:{removeFiles:c,mediaType:"ALL",callback:function(){M.debug.log("M.media.remove.callback",status,d)}},surrogateKeys:{list:"removeFiles",files:"removeFiles",mode:"mediaType",media:"mediaType",type:"mediaType",finish:"callback",onfinish:"callback"},enumsKeys:{mediaType:{PHOTO:0,VIDEO:1,MOVIE:1,AUDIO:2,ALL:3}}});g=e.convert(arguments,function(i,k){if(i=="removeFiles"){var j=M.util.typeOf(k);return(j===OBJECT_TYPE.ARRAY)?k:[k]}});g.response=M.response.on(function(i){var j=i.status;var k={};if(i.error){k={status:i.status,error:i.error,message:i.error}}else{k={status:i.status}}g.callback.call(f,j,k,g)});h.removeFiles=g.removeFiles;h.mediaType=g.mediaType;h.callback=g.response.toString();d=M.execute("wn2MediaRemove",h);if(d.status!=="PROCESSING"){g.response.execute(d)}return M},info:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["__SETTING__","callback"],defaultSetting:{path:"/",mediaType:"ALL",callback:function(j,i){M.debug.log("M.media.info.callback",j,i)}},surrogateKeys:{alias:"path",source:"path",type:"division",load:"callback",onload:"callback"},enumsKeys:{mediaType:{PHOTO:0,VIDEO:1,MOVIE:1,AUDIO:2,ALL:3}}});g=e.convert(arguments);g.response=M.response.on(function(t){var m=t.status;var s={};if(t.error){s={status:t.status,error:t.error,message:t.error}}else{var k=[];var j=[];var r={};for(var n=0;n<t.files.length;n++){var o=t.files[n];var p={path:o.path||"",alias:o.alias||"",source:o.source||"",name:o.name||"",size:o.size||0,duration:o.duration||0,orientation:o.orientation||0,type:o.type||"",created:o.created||"",updated:o.updated||"",fullpath:o.source||"",saveDate:o.updated||"",startDate:o.created||"",endDate:o.updated||""};var q=p.path.split("/");q.pop();var l=q.join("/");if(r[l]){r[l].subFileCnt=r[l].fileCnt=r[l].fileCount=(r[l].fileCount+1)}else{r[l]={path:l,name:l,fileCnt:1,fileCount:1,subFileCnt:1};j.push(r[l])}k.push(p)}s={dirs:j,files:k,list:k}}g.callback.call(f,m,s,g)});h.path=g.path;h.mediaType=g.mediaType;h.callback=g.response.toString();d=M.execute("wn2MediaInfo",h);if(d.status!=="PROCESSING"){g.response.execute(d)}return M}},a)})(window);