/*! MNetwork Extends 2.1.4.35 [Android 2.1.4.23, iOS 2.1.4.33] */
(function(b,c){var a="2.1.4.35";M.addon("net.ext",{http:{upload:function(){var g,p,r,e=b,m={};g=M.defaultSetting.create({paramsKeys:["url"],defaultSetting:{url:"",headers:{},parameters:{},body:[],files:[],useCookie:true,timeout:20000,encoding:"UTF-8",async:true,indicator:true,progress:function(t,u,s,i,j){M.debug.log("http.upload.progress",t,u,s,i,j)},finish:function(s,t,i,j){M.debug.log("http.upload.finish",s,t,i,j)}},surrogateKeys:{header:"headers",param:"parameters",params:"parameters",onprogress:"progress",onfinish:"finish",callback:"finish"},enumsKeys:{encoding:{"UTF-8":0,"EUC-KR":1}}});p=g.convert(arguments);if(p.body.length>0){for(var l in p.body){if(!p.body.hasOwnProperty(l)){continue}var q=p.body[l];if((q.type===c&&q.localpath!==c)||(q.type!==c&&q.type.toUpperCase()=="FILE")){p.files.push({mimetype:q.mimetype||"DEFAULT",name:q.name,localpath:(q.localpath)?q.localpath:(q.content||"")})}else{if(q.type.toUpperCase()=="TEXT"){p.parameters[q.name]=q.content}}}}if(p.files.length>0){var d=[];for(var h in p.files){if(!p.files.hasOwnProperty(h)){continue}var f=p.files[h];if(M.util.typeOf(f)===OBJECT_TYPE.OBJECT){if(f.localpath===c&&f.path!==c){f.localpath=f.path;delete f.path}else{if(f.localpath===c&&f.value!==c){f.localpath=f.value;delete f.value}}}else{if(M.util.typeOf(f)===OBJECT_TYPE.STRING){var o=f;f={mimetype:"DEFAULT",localpath:o}}}if(f.name===c){f.name="upload_file"}if(f.mimetype===c){f.mimetype="DEFAULT"}d.push({mimetype:f.mimetype,localpath:f.localpath,name:f.name})}p.files=d}var n=M.response.on(function(s,t,j,i){p.progress.call(e,s,t,j,i,p)});n.progressing=true;var k=M.response.on(function(i){n.expire();if(i.status==="SUCCESS"){p.finish.call(e,i.statusCode,i.header,i.body,i.status,"",p)}else{p.finish.call(e,i.statusCode||-1,{},{},i.status,i.error,p)}});m.url=p.url;m.headers=p.headers;m.parameters=p.parameters;m.files=p.files;m.timeout=typeof p.timeout=="string"?Number(p.timeout):p.timeout;m.encoding=p.encoding;m.progress=n.toString();m.finish=k.toString();m.isAsync=p.async===true?"Y":"N";m.useIndicator=p.indicator===true?"Y":"N";m.useCookie=p.useCookie===true?"Y":"N";r=M.execute("wn2NetHttpFileUpload",m)||{status:"FAIL",error:"WNInterface(wn2NetHttpFileUpload) is failed"};if(r.status!=="PROCESSING"){k.execute(r)}return M},download:function(){var g,i,e,h=b,j={};g=M.defaultSetting.create({paramsKeys:["url"],defaultSetting:{url:"",directory:"/download",method:"GET",headers:{},contentType:"DEFAULT",useCookie:true,parameters:{},timeout:5000,encoding:"UTF-8",async:true,indicator:true,overwrite:false,fileName:"",progress:function(n,o,m,k,l){M.debug.log("http.download.progress",n,o,l)},finish:function(l,n,k,m){M.debug.log("http.download.finish",l,n,k,m)}},surrogateKeys:{mimetype:"contentType",dir:"directory",path:"directory",header:"headers",param:"parameters",params:"parameters",data:"parameters",onprogress:"progress",onfinish:"finish",callback:"finish"},enumsKeys:{encoding:{"UTF-8":0,"EUC-KR":1}}});i=g.convert(arguments);var d=M.response.on(function(m,n,l,k){i.progress.call(h,m,n,l,k,i)});d.progressing=true;var f=M.response.on(function(k){d.expire();if(k.status==="SUCCESS"){var l={path:k.fileInfo.path||"",alias:k.fileInfo.alias||"",source:k.fileInfo.source||"",fullpath:k.fileInfo.source||""};i.finish.call(h,k.statusCode,k.header,l,k.status,null,i)}else{i.finish.call(h,k.statusCode||-1,{},{},k.status,k.error,i)}});j.url=i.url;j.directory=i.directory;j.method=i.method;j.headers=i.headers;j.parameters=i.parameters;j.timeout=i.timeout;j.encoding=i.encoding;j.progress=d.toString();j.finish=f.toString();j.contentType=i.contentType;j.useCookie=i.useCookie===true?"Y":"N";j.isAsync=i.async===true?"Y":"N";j.useIndicator=i.indicator===true?"Y":"N";j.isOverwrite=i.overwrite===true?"Y":"N";j.fileName=i.fileName;e=M.execute("wn2NetHttpFileDownload",j)||{status:"FAIL",error:"WNInterface(wn2NetHttpFileDownload) is failed"};if(e.status!=="PROCESSING"){f.execute(e)}return M},cancel:function(){var e,g,d,f=b,h={};e=M.defaultSetting.create({paramsKeys:["url"],defaultSetting:{url:""}});g=e.convert(arguments);h.url=g.url;d=M.execute("wn2NetHttpFileTransCancel",h);return d}},ftp:{upload:function(){var f,k,h=b,l={};f=M.defaultSetting.create({paramsKeys:["host"],defaultSetting:{host:"",port:21,account:{username:"anonymous",password:""},indicator:true,body:[],files:[],progress:function(m,n,i){M.debug.log("ftp.upload.finish",m,n,i)},finish:function(i,n,m){M.debug.log("ftp.upload.finish",i,n,m)}},surrogateKeys:{targetfiles:"files",onprogress:"progress",onfinish:"finish"}});k=f.convert(arguments);if(k.body.length>0){for(var g in k.body){var j=k.body[g];if((j.type===c&&j.path!==c)||j.type.toUpperCase()=="FILE"){k.files.push({name:j.name,path:(j.path)?j.path:(j.content||"")})}else{if(j.type.toUpperCase()=="TEXT"){k.parameters[j.name]=j.content}}}}var d=M.response.on(function(i,m){k.progress.call(h,i,m,k)});d.progressing=true;var e=M.response.on(function(i,m){d.expire();k.finish.call(h,i,m,k)});l.connectionInfo={host:k.host,username:k.account.username,password:k.account.password,port:k.port};l.files=k.files;l.progress=d.toString();l.finish=e.toString();l.useIndicator=k.indicator===true?"Y":"N";result=M.execute("wn2NetFtpFileUpload",l);if(result.status!=="PROCESSING"){e.execute(result)}return M},download:function(){var f,h,g=b,i={};f=M.defaultSetting.create({paramsKeys:["host"],defaultSetting:{host:"",port:21,account:{username:"anonymous",password:""},files:[],directory:"download",indicator:true,progress:function(k,l,j){M.debug.log("ftp.download.finish",k,l,j)},finish:function(j,l,k){M.debug.log("ftp.download.finish",j,l,k)}},surrogateKeys:{targetfiles:"files",serverfiles:"files",onprogress:"progress",onfinish:"finish"}});h=f.convert(arguments);h.willWaitResult=false;var d=M.response.on(function(j,k){h.progress.call(g,j,k,h)});d.progressing=true;var e=M.response.on(function(j,k){d.expire();h.finish.call(g,j,k,h)});i.connectionInfo={host:h.host,username:h.account.username,password:h.account.password,port:h.port};i.files=h.files;i.directory=h.directory;i.progress=d.toString();i.finish=e.toString();i.useIndicator=h.indicator===true?"Y":"N";result=M.execute("wn2NetFtpFileDownload",i);if(result.status!=="PROCESSING"){e.execute(result)}return M},list:function(){var d,f,e=b,g={};d=M.defaultSetting.create({paramsKeys:["host"],defaultSetting:{host:"",port:"21",account:{username:"anonymous",password:""},path:"",indicator:true,finish:function(h,j,i){M.debug.log("ftp.list",h,j,i)}},surrogateKeys:{serverpath:"path",onprogress:"progress",onfinish:"finish"}});f=d.convert(arguments);f.willWaitResult=false;g.connectionInfo={host:f.host,username:f.account.username,password:f.account.password,port:f.port};g.path=f.path;g.progress=progressResponse.toString();g.finish=finishResponse.toString();g.isIndicator=f.indicator===true?"Y":"N";result=M.execute("wn2NetFtpLoadList",g);if(result.status!=="PROCESSING"){finishResponse.execute(result)}return M}}},a)})(window);