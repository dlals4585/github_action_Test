/*! MPopup 2.1.4.30 [Android 2.1.4.30, iOS 2.1.4.30] */
(function(b,c){var a="2.1.4.30";M.addon("pop",{_buttonsFactory:function(l,g){var j=[];if(l===c){l=[]}else{if(l==="object"){if(l.buttonInfo!==c&&M.util.typeOf(l.buttonInfo)==="array"){l=l.buttonInfo}else{l=[]}}else{if(M.util.typeOf(l)==="string"){l=l.split(/\s+,\s+|,\s+|\s+,/g);if(l.length===1&&l[0]===""){l=[]}}}}if(M.util.typeOf(l)==="array"){if(l.length>=0){for(var f=0,d=Math.min(l.length,3);f<d;f++){var h=l[f];var k=M.util.typeOf(h)==="string"?h:(M.util.typeOf(h.title)==="string")?h.title:"__DEFAULT__";var e=g(f,h);j.push({title:k,cbFuncName:e.toString()})}}}else{j=[]}return j},_dateByType:function(k){var f=new Date(),j=String(f.getFullYear()),m=f.getMonth()+1<10?"0"+(f.getMonth()+1):f.getMonth()+1,n=f.getDate()<10?"0"+f.getDate():f.getDate()+"",g=f.getHours()<10?"0"+f.getHours():f.getHours()+"",l=g>12?g-12:g,h=f.getMinutes()<10?"0"+f.getMinutes():f.getMinutes()+"",e=g>12?"PM":"AM",o={},i="19790101",d="21001231";l=l<10?"0"+l:l;if(k=="YMD"){o.init=j+m+n;o.min=i;o.max=d;return o}if(k=="YM"){o.init=j+m;o.min=i.substr(0,6);o.max=d.substr(0,6);return o}if(k=="MMYYYY"){o.init=m+j;o.min=i.substr(4,2)+i.substr(0,4);o.max=d.substr(4,2)+d.substr(0,4);return o}if(k=="YYYY"){o.init=j;o.min=i.substr(0,4);o.max=d.substr(0,4);return o}if(k=="MM"){o.init=m;o.min=i.substr(4,2);o.max=d.substr(4,2);return o}if(k=="DD"){o.init=n;o.min=i.substr(6);o.max=d.substr(6);return o}if(k=="HM12"){o.init=l+h+e;o.min="0000AM";o.max="1259PM";return o}if(k=="HM24"){o.init=g+h;o.min="0000";o.max="2359";return o}},_isValidDateSetting:function(f){var i=this._dateByType(f.dateType);M.tool.log("dateInfo",i,f);var e=f.dateType,h=f.initDate||i.init,g=f.minDate||i.min,j=f.maxDate||i.max;f._isValid=true;f._errorMessage="";if(e==="YYYYMMDD"){f.dateType="YMD"}else{if(e==="DMY"){f.dateType="YMD";f.reverse=true}else{if(e==="YYYYMM"){f.dateType="YM"}}}if(e=="HM12"){if(h.length!==6||(h.substring(4,6)!="AM"&&h.substring(4,6)!="PM")){f._isValid=false;f._errorMessage="init date format Error";return false}}else{if(e=="HM24"){if(h.length!=4){f._isValid=false;f._errorMessage="init date format Error";return false}}else{if(e=="YMD"||e=="DMY"||e=="YM"||e=="MMYYYY"||e=="YYYY"||e=="MM"||e=="DD"){var d=6;if(e=="YMD"||e=="DMY"){d=8}else{if(e=="MMYYYY"||e=="YM"){d=6}else{if(e=="MM"||e=="DD"){d=2}else{if(e=="YYYY"){d=4}}}}if(g.length!=d){f._isValid=false;f._errorMessage="min date format Error";return false}if(j.length!=d){f._isValid=false;f._errorMessage="max date format Error";return false}}else{f._isValid=false;f._errorMessage="type constant Error";return false}}}if(e==="HM12"||f.dateType==="HM24"){if(f.interval<1||(60%f.interval)!==0){f.interval=0}}else{f.interval=0}return true},_isValidListSetting:function(p){var l,o,j,f=b;if(p.mode=="SINGLE"){j=(M.util.typeOf(p.selected)==="string")?M.util.parseInteger(p.selected):(M.util.typeOf(p.selected)==="number")?M.util.parseInteger(p.selected):(M.util.typeOf(p.selected)==="array")?M.util.parseInteger(p.selected[0]):-1;p.selected=j}else{var e=[];var n=(M.util.typeOf(p.selected)==="string")?M.util.splitString(p.selected):(M.util.typeOf(p.selected)==="number")?[p.selected]:(M.util.typeOf(p.selected)==="array")?p.selected:[];for(l=0;l<n.length;l++){j=n[l];e.push(j)}p.selected=e}if(p.value!==c){var g=(M.util.typeOf(p.value)==="string")?M.util.splitString(p.value):(M.util.typeOf(p.value)==="number")?[p.value]:p.value;var d=[];for(o in g){d.push(g[o])}p.value=d}else{p.value=[]}var h,m;if(M.util.typeOf(p.list)==="string"){h=M.util.splitString(p.list);m=[];if(h.length===1&&h[0]===""){h=[]}for(o in h){m.push({title:M.util.trim(h[o]),value:(p.value[o])?p.value[o]:M.util.trim(h[o])})}p.list=m}else{if(M.util.typeOf(p.list)==="array"){h=p.list;m=[];if(h.length>0&&M.util.typeOf(h[0])=="string"){for(o in h){m.push({title:M.util.trim(h[o]),value:(p.value[o])?p.value[o]:M.util.trim(h[o])})}}else{for(l=0,max=h.length;l<max;l++){m.push({title:h[l].title,value:(p.value[l])?p.value[l]:h[l].value})}}p.list=m}}if(p.mode!=="SINGLE"&&p.buttons.length===0){var k=p._responseFactory(0,{callback:p.callback});p.buttons.push({title:"__DEFAULT__",cbFuncName:k.toString()})}p.buttons=this._buttonsFactory(p.buttons,p._responseFactory)},date:function(){var f,e,h,d,g=b,i={};f=M.defaultSetting.create({paramsKeys:["__SETTING__","callback"],defaultSetting:{dateType:"HM12",initDate:"",minDate:"",maxDate:"",interval:0,reverse:false,mode:"analog",callback:function(j,k){M.debug.log("M.pop.date",j)}},surrogateKeys:{type:"dateType",init:"initDate",startdate:"minDate",enddate:"maxDate",onselect:"callback"},enumsKeys:{dateType:{HM12:0,HM24:1,YMD:2,DMY:2,YYYYMMDD:2,YM:3,YYYYMM:3,MMYYYY:4,YYYY:5,MM:6,DD:7}}});e=Array.prototype.slice.call(arguments,0);h=f.convert(arguments,function(j,k){if(j==="callback"){if(typeof e[e.length-1]==="function"&&k!==e[e.length-1]){return e[e.length-1]}}});if(!this._isValidDateSetting(h)){M.debug.error(h._errorMessage);return M}h.response=M.response.on(function(j){var k=j.status;var l={};if(j.error){l={status:j.status,error:j.error,message:j.error}}else{l=j.dateInfo;l.status="SUCCESS"}h.callback.call(g,l,h)});i.callback=h.response.toString();i.dateType=h.dateType;i.initDate=h.initDate;i.minDate=h.minDate;i.maxDate=h.maxDate;i.mode=h.mode;i.interval=h.interval.toString();i.reverse=h.reverse;d=M.execute("wn2PopupDate",i);if(d.status!=="PROCESSING"){h.response.execute(d)}return M},alert:function(){var f,e,h,d,g=b,i={};f=M.defaultSetting.create({paramsKeys:["message","callback"],defaultSetting:{title:"",message:"",buttons:c,callback:function(k,l){M.debug.log("M.pop.alert",k)},defaultButtonTitle:"",waitUntilDone:true},surrogateKeys:{button:"buttons",msg:"message",click:"callback",onclick:"callback"},enumsKeys:{}});e=Array.prototype.slice.call(arguments,0);h=f.convert(arguments,function(k,l){if(k==="callback"){if(typeof e[e.length-1]==="function"&&l!==e[e.length-1]){return e[e.length-1]}}});h._groupID=M.response.groupID();h._responses=[];h._responseFactory=function(l,m){var o=(M.util.typeOf(m.cbFuncName)=="string"&&M.util.typeOf(b[m.cbFuncName])=="function")?b[m.cbFuncName]:(M.util.typeOf(m.callback)=="function"?m.callback:h.callback);var n=l;var k=M.response.on(function(p){if(n==p){o.call(g,n,h)}},h._groupID);h._responses[l]=k;return k};h.buttons=this._buttonsFactory(h.buttons,h._responseFactory);h.defaultResponse=M.response.on(function(k){h.callback.call(g,k,h)},h._groupID);if(h.buttons.length===0){h.buttons.push({title:"__DEFAULT__",cbFuncName:h.defaultResponse.toString()})}i.title=h.title;i.defaultButtonTitle=h.defaultButtonTitle;i.message=h.message;i.buttons=h.buttons;i.waitUntilDone=(h.waitUntilDone===true)?"Y":"N";d=M.execute("wn2PopupConfirm",i);if(d.status!=="PROCESSING"){var j=h._responses.length>0?h._responses[0]:h.defaultResponse;j.execute(d)}return M},list:function(){var f,e,i,d,g=b,j={};f=M.defaultSetting.create({paramsKeys:["mode","callback"],defaultSetting:{mode:"SINGLE",title:"",message:"",value:c,list:c,buttons:c,selected:c,callback:function(m,l,k){M.debug.log("M.pop.list.callback",m,l)},cancelButtonTitle:"",cancelable:false},surrogateKeys:{select:"selected",button:"buttons",msg:"message",onselect:"callback"},enumsKeys:{mode:{SINGLE:0,MULTI:1}}});e=Array.prototype.slice.call(arguments,0);i=f.convert(arguments,function(k,l){if(k==="callback"){if(typeof e[e.length-1]==="function"&&l!==e[e.length-1]){return e[e.length-1]}}});i._groupID=M.response.groupID();i._responseFactory=function(l,m){var n=(M.util.typeOf(m.cbFuncName)=="string"&&M.util.typeOf(b[m.cbFuncName])=="function")?b[m.cbFuncName]:(M.util.typeOf(m.callback)=="function"?m.callback:i.callback);var k=M.response.on(function(q){k.expire(true);if(q.status==="CANCEL"){n.call(g,-1,{},i);return}if(i.mode==="SINGLE"){var p=q;q={title:p.selectedTitle,value:p.selectedVal,index:M.util.parseInteger(p.selectedIdx)};n.call(g,l,q,i)}else{var o=(q.selectedListInfo!==c)?q.selectedListInfo:[];n.call(g,l,o,i)}},i._groupID);return k};this._isValidListSetting(i);if(i._isValid===false){M.debug.error(i._errorMessage);return M}j.title=i.title;j.cancelButtonTitle=i.cancelButtonTitle;j.cancelable=i.cancelable===true?"Y":"N";if(i.buttons.length===0){j.mode="NORMAL";j.list=i.list;j.callback=i._responseFactory(0,i.callback).toString();j.selected=M.util.parseString(i.selected)}else{j.mode=i.mode;j.list=i.list;j.buttons=i.buttons;if(i.mode==="MULTI"){if(typeof i.selected==="object"){j.selected=i.selected}else{var h=M.util.parseString(i.selected);j.selected=[h]}}else{j.selected=typeof i.selected==="object"?i.selected:M.util.parseString(i.selected)}}d=M.execute("wn2PopupList",j);if(d.status!=="PROCESSING"){i.response.execute(d)}return M},instance:function(){var f,h,d,g=b,i={};var e=arguments;f=M.defaultSetting.create({paramsKeys:["message","showTime"],defaultSetting:{message:"",showTime:"SHORT"},surrogateKeys:{show:"showTime",time:"showTime"},enumsKeys:{showTime:{SHORT:0,LONG:1}}});h=f.convert(arguments,function(j,l,k){if(j==="showTime"){if(!isNaN(e[1])){return e[1]}if(!isNaN(k)){return k}}});i.message=h.message;i.showTime=h.showTime;d=M.execute("wn2PopupInstance",i);return M}},a)})(window);